# GitHub Actions Integration Examples

Examples for integrating the CLI utility with GitHub Actions for automated workflows.

## Basic CI/CD Pipeline

### Code Analysis Workflow

```yaml
name: Roo CLI Analysis
on: [push, pull_request]

jobs:
    analyze:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Run Code Analysis
              run: |
                  roo --format json "analyze codebase for security issues and code quality" > analysis.json

            - name: Upload Analysis Results
              uses: actions/upload-artifact@v4
              with:
                  name: code-analysis
                  path: analysis.json
```

**Description:** Basic workflow for automated code analysis on every push and pull request.

**Difficulty:** Intermediate  
**Estimated Time:** 5 minutes  
**Tags:** #github-actions #analysis #security #ci

---

### Automated Code Review

```yaml
name: Automated Code Review
on:
    pull_request:
        types: [opened, synchronize]

jobs:
    review:
        runs-on: ubuntu-latest
        permissions:
            contents: read
            pull-requests: write
        steps:
            - uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Get Changed Files
              id: changed-files
              run: |
                  echo "files=$(git diff --name-only ${{ github.event.pull_request.base.sha }} ${{ github.sha }} | tr '\n' ' ')" >> $GITHUB_OUTPUT

            - name: Review Changes
              run: |
                  roo --format json "review these changed files for best practices and potential issues: ${{ steps.changed-files.outputs.files }}" > review.json

            - name: Post Review Comment
              uses: actions/github-script@v7
              with:
                  script: |
                      const fs = require('fs');
                      const review = JSON.parse(fs.readFileSync('review.json', 'utf8'));

                      const body = `## ðŸ¤– Automated Code Review

                      ${review.summary || 'Analysis complete'}

                      ### Findings:
                      ${review.findings ? review.findings.map(f => `- ${f}`).join('\n') : 'No issues found'}

                      ---
                      *Generated by Roo CLI*`;

                      github.rest.issues.createComment({
                        issue_number: context.issue.number,
                        owner: context.repo.owner,
                        repo: context.repo.repo,
                        body: body
                      });
```

**Description:** Automated code review that posts findings as PR comments.

**Difficulty:** Advanced  
**Estimated Time:** 10 minutes  
**Tags:** #github-actions #review #automation #pr

---

## Testing and Quality Assurance

### Comprehensive Testing Pipeline

```yaml
name: Test and Quality Check
on: [push, pull_request]

jobs:
    test:
        runs-on: ubuntu-latest
        strategy:
            matrix:
                node-version: [16, 18, 20]
        steps:
            - uses: actions/checkout@v4

            - name: Setup Node.js ${{ matrix.node-version }}
              uses: actions/setup-node@v4
              with:
                  node-version: ${{ matrix.node-version }}

            - name: Install dependencies
              run: npm ci

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Run tests
              run: npm test

            - name: Generate test report
              run: |
                  roo --format json "analyze test results and generate comprehensive report" > test-report.json

            - name: Upload test report
              uses: actions/upload-artifact@v4
              with:
                  name: test-report-node-${{ matrix.node-version }}
                  path: test-report.json
```

**Description:** Multi-version testing with automated report generation.

**Difficulty:** Intermediate  
**Estimated Time:** 8 minutes  
**Tags:** #testing #matrix #quality #nodejs

---

### Performance Monitoring

```yaml
name: Performance Monitoring
on:
    schedule:
        - cron: "0 2 * * *" # Daily at 2 AM
    workflow_dispatch:

jobs:
    performance:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install dependencies
              run: npm ci

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Run performance analysis
              run: |
                  roo --format json "analyze application performance and identify bottlenecks" > perf-report.json

            - name: Run load tests
              run: |
                  roo "run load tests and analyze performance metrics" > load-test.log

            - name: Generate performance report
              run: |
                  roo "create performance report with recommendations from analysis" > performance.md

            - name: Create issue if performance degraded
              uses: actions/github-script@v7
              if: failure()
              with:
                  script: |
                      github.rest.issues.create({
                        owner: context.repo.owner,
                        repo: context.repo.repo,
                        title: 'ðŸš¨ Performance degradation detected',
                        body: 'Automated performance monitoring detected issues. Please review the performance report.',
                        labels: ['performance', 'automated']
                      });
```

**Description:** Scheduled performance monitoring with automated issue creation.

**Difficulty:** Advanced  
**Estimated Time:** 12 minutes  
**Tags:** #performance #monitoring #schedule #automation

---

## Documentation and Release

### Auto-Documentation Generation

```yaml
name: Generate Documentation
on:
    push:
        branches: [main]
        paths: ["src/**", "docs/**"]

jobs:
    docs:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
              with:
                  token: ${{ secrets.GITHUB_TOKEN }}

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Generate API documentation
              run: |
                  roo "generate comprehensive API documentation from source code" > docs/api.md

            - name: Update README
              run: |
                  roo "update README.md with current features and usage examples" > README.md

            - name: Generate changelog
              run: |
                  roo "generate changelog from git commits since last release" > CHANGELOG.md

            - name: Commit documentation updates
              run: |
                  git config --local user.email "action@github.com"
                  git config --local user.name "GitHub Action"
                  git add docs/ README.md CHANGELOG.md
                  git diff --staged --quiet || git commit -m "ðŸ“š Auto-update documentation"
                  git push
```

**Description:** Automatic documentation generation and updates.

**Difficulty:** Intermediate  
**Estimated Time:** 8 minutes  
**Tags:** #documentation #automation #api #changelog

---

### Release Automation

```yaml
name: Release
on:
    push:
        tags: ["v*"]

jobs:
    release:
        runs-on: ubuntu-latest
        permissions:
            contents: write
        steps:
            - uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Generate release notes
              run: |
                  roo --format json "generate release notes from commits since last tag" > release-notes.json

            - name: Build project
              run: npm run build

            - name: Run tests
              run: npm test

            - name: Create GitHub Release
              uses: actions/github-script@v7
              with:
                  script: |
                      const fs = require('fs');
                      const releaseNotes = JSON.parse(fs.readFileSync('release-notes.json', 'utf8'));

                      await github.rest.repos.createRelease({
                        owner: context.repo.owner,
                        repo: context.repo.repo,
                        tag_name: context.ref.replace('refs/tags/', ''),
                        name: `Release ${context.ref.replace('refs/tags/', '')}`,
                        body: releaseNotes.body || 'Release generated automatically',
                        draft: false,
                        prerelease: false
                      });
```

**Description:** Automated release process with generated release notes.

**Difficulty:** Advanced  
**Estimated Time:** 15 minutes  
**Tags:** #release #automation #tagging #deployment

---

## Security and Compliance

### Security Scanning

```yaml
name: Security Scan
on:
    schedule:
        - cron: "0 6 * * 1" # Weekly on Monday at 6 AM
    workflow_dispatch:

jobs:
    security:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install Roo CLI
              run: npm install -g @roo/cli

            - name: Run security audit
              run: |
                  roo --format json "perform comprehensive security audit of codebase" > security-audit.json

            - name: Check dependencies
              run: |
                  roo "audit npm dependencies for vulnerabilities" > dependency-audit.log

            - name: Scan for secrets
              run: |
                  roo "scan codebase for potential secrets and sensitive data" > secrets-scan.log

            - name: Generate security report
              run: |
                  roo "create security report with findings and recommendations" > security-report.md

            - name: Upload security artifacts
              uses: actions/upload-artifact@v4
              with:
                  name: security-reports
                  path: |
                      security-audit.json
                      dependency-audit.log
                      secrets-scan.log
                      security-report.md
```

**Description:** Comprehensive security scanning and reporting.

**Difficulty:** Advanced  
**Estimated Time:** 10 minutes  
**Tags:** #security #audit #compliance #scanning

---

## Environment-Specific Deployments

### Multi-Environment Deployment

```yaml
name: Deploy to Environments
on:
    push:
        branches: [main, develop]

jobs:
    deploy:
        runs-on: ubuntu-latest
        strategy:
            matrix:
                environment: [staging, production]
                include:
                    - environment: staging
                      branch: develop
                    - environment: production
                      branch: main
        steps:
            - uses: actions/checkout@v4
              if: github.ref == format('refs/heads/{0}', matrix.branch)

            - name: Setup Node.js
              if: github.ref == format('refs/heads/{0}', matrix.branch)
              uses: actions/setup-node@v4
              with:
                  node-version: "18"

            - name: Install Roo CLI
              if: github.ref == format('refs/heads/{0}', matrix.branch)
              run: npm install -g @roo/cli

            - name: Prepare deployment
              if: github.ref == format('refs/heads/{0}', matrix.branch)
              run: |
                  roo "prepare application for ${{ matrix.environment }} deployment"

            - name: Deploy to ${{ matrix.environment }}
              if: github.ref == format('refs/heads/{0}', matrix.branch)
              run: |
                  roo "deploy application to ${{ matrix.environment }} environment with rollback capability"

            - name: Run post-deployment tests
              if: github.ref == format('refs/heads/{0}', matrix.branch)
              run: |
                  roo "run post-deployment smoke tests for ${{ matrix.environment }}"
```

**Description:** Environment-specific deployment with branch-based triggers.

**Difficulty:** Advanced  
**Estimated Time:** 20 minutes  
**Tags:** #deployment #environments #staging #production

---

## Tips and Best Practices

### Workflow Optimization

- Use caching for dependencies and build artifacts
- Implement proper error handling and notifications
- Use matrix strategies for multi-version testing
- Set appropriate permissions for each job
- Use environment variables for configuration

### Security Considerations

- Use secrets for sensitive data
- Limit workflow permissions
- Validate inputs and outputs
- Regular security scanning
- Keep actions and dependencies updated

**Difficulty:** Intermediate  
**Tags:** #best-practices #optimization #security
